<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <style>

    .buttons {
      margin: 10px 0px;
    }

    .images {
      height: 500px;
      position: relative;
    }

    img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      opacity: 0;
    }

    #webcam-container {
        position: absolute;
        top: 30px;
        left: 5px;
    }

    #toggle-webcam {
        position: absolute;
        top: 5px;
        right: 5px;
    }

        .scenario-card {
        display: none;
        font-size: 2em;
        width: 500px;
        padding: 30px;
        margin: 30px;
        border: 3px dashed #666;
        background-color: #c0f0f0;
      }

      .scenario-card .title {
        font-size: 1.2em;
        font-family: "Playwrite NG Modern", cursive;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
      }
  </style>
</head>

<body>

<div id="container">

  <h3>AprilTag Scenario Cards</h3>

  <p>This is a working example using AprilTag to pick a scenario card!</p>
  <p>Click on the 'Toggle Webcam' button to hide/show the webcam for testing purposes.</p>

    <div id="scenario-cards">

          <div class="scenario-card" id="scenario-card-1">
        <div class="title">SCENARIO CARD 1: Heavy Storm</div>
        <div class="explanation">Zones 6, 7, 10, 11 generate no revenue next cycle due to high density impact.</div>
      </div>

      <div class="scenario-card" id="scenario-card-2">
        <div class="title">SCENARIO CARD 2: Wind Event</div>
        <div class="explanation">Zones 6, 7, 10, 11 cannot build anything due to high density impact.</div>
      </div>

      <div class="scenario-card" id="scenario-card-3">
        <div class="title">SCENARIO CARD 3: Superstorm Event</div>
        <div class="explanation"> Zones 1, 2, 4, 5, 8 lose 5 blocks of residential buildings.
        </div>
      </div>

      <div class="scenario-card" id="scenario-card-4">
        <div class="title">Immediate Relief Fund</div>
        <div class="explanation">No tokens generated this cycle as all are used for immediate relief
        </div>
      </div>

      <div class="scenario-card" id="scenario-card-5">
        <div class="title">SCENARIO CARD 5: Infrastructure Failure</div>
        <div class="explanation"> All inland zones to lose all public services
        </div>
      </div>
    </div>
  </div>

  <div class="scenario-card" id="scenario-card-6">
    <div class="title">SCENARIO CARD 6: Infrastructure Failure 02</div>
    <div class="explanation">All shore zones to lose all public services</div>
  </div>

  <div class="scenario-card" id="scenario-card-7">
    <div class="title">SCENARIO CARD 7: Political Unrest</div>
    <div class="explanation">The next player skips their turn due to citywide protests</div>
  </div>

  <div class="scenario-card" id="scenario-card-8">
    <div class="title">SCENARIO CARD 8: Financial Crisis</div>
    <div class="explanation">All players lose half their tokens.</div>
  </div>

  <div class="scenario-card" id="scenario-card-9">
    <div class="title">SCENARIO CARD 9: Policy Change</div>
    <div class="explanation">All players receive a bonus action this round due to new government policies</div>
  </div>

  <div class="scenario-card" id="scenario-card-10">
    <div class="title">SCENARIO CARD 10: Environmental Grant</div>
    <div class="explanation">Everyone gains 1 token for each G.I in their neighbourhood currently on the board
    </div>
  </div>

  <div class="scenario-card" id="scenario-card-11">
    <div class="title">SCENARIO CARD 11: Infrastructure Gain</div>
    <div class="explanation">Each player can build one element for free this cycle</div>
  </div>

  <div class="scenario-card" id="scenario-card-12">
    <div class="title">SCENARIO CARD 12: Power Outage</div>
    <div class="explanation">All inland zones to lose all commercial revenue for this round.</div>
  </div>

  <div class="scenario-card" id="scenario-card-13">
    <div class="title">SCENARIO CARD 13: Power Outage 02</div>
    <div class="explanation">All shore zones to lose all commercial revenue for this round.</div>
  </div>

  <div class="scenario-card" id="scenario-card-14">
    <div class="title">SCENARIO CARD 14: Disease Outbreak</div>
    <div class="explanation">All inland zones to lose all revenue for this cycle</div>
  </div>

  <div class="scenario-card" id="scenario-card-15">
    <div class="title">SCENARIO CARD 15: Disease Outbreak 02</div>
    <div class="explanation">All shore zones to lose all revenue for this cycle</div>
  </div>

  <div class="scenario-card" id="scenario-card-16">
    <div class="title">SCENARIO CARD 16: Budget Cut</div>
    <div class="explanation">All players lose 2 tokens due to budget cut</div>
  </div>

</div>




<div id="toggle-webcam"><button onclick="toggleWebcamContainer()">Toggle Webcam</button></div>
<div id="webcam-container" style="display:inside;">
    <video id="webcam_canvas" playsinline autoplay style="display:inside"></video>
    <canvas id="out_canvas"></canvas>
</div>

</body>

<script src="apriltags\apriltagjs\start_video.js" async></script>
<script src="apriltags\apriltagjs\on_tag_logic.js"></script>
<script type="module" src="apriltags\apriltagjs\video_process.js" async></script>

<script>

// create a tagManager
const tagManager = new TagManager();


function toggleWebcamContainer() {
    var container = document.getElementById('webcam-container');
    if(container.style.getPropertyValue("opacity") == 1 || container.style.getPropertyValue("opacity") == "") {

        container.style.setProperty("opacity", 0);

    } else {
        container.style.setProperty("opacity", 1);

    }
}
//////////////////
/// CHANGE CODE BELOW
//////////////////
//////////////////
//////////////////
//////////////////
//////////////////







//make an new tag
var tag00 = new Tag(0);

// do stuff when it's visible
tag00.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-1")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag00 is now visible");
});

// do stuff when it's hidden
tag00.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-1")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag00 is now hidden");
});


// add this tag to the system that manages all tags
tagManager.addTag(tag00);

//make an new tag
var tag01 = new Tag(1);

// do stuff when it's visible
tag01.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-1")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag01 is now visible");
});

// do stuff when it's hidden
tag01.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-2")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag01 is now hidden");
});


// add this tag to the system that manages all tags
tagManager.addTag(tag01);

//make an new tag
var tag02 = new Tag(2);

// do stuff when it's visible
// do stuff when it's visible
tag02.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-3")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag02 is now visible");
});

// do stuff when it's hidden
tag02.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-3")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag02 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag02);

//make an new tag
var tag03 = new Tag(3);

/// do stuff when it's visible
tag03.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-4")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag03 is now visible");
});

// do stuff when it's hidden
tag03.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-4")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag03 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag03);

//make an new tag
var tag04 = new Tag(4);

// do stuff when it's visible
tag04.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-5")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag04 is now visible");
});

// do stuff when it's hidden
tag04.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-5")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag04 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag04);


//make an new tag
var tag05 = new Tag(5);

// do stuff when it's visible
tag05.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-6")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag01 is now visible");
});

// do stuff when it's hidden
tag05.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-6")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag05 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag05);


//make an new tag
var tag06 = new Tag(6);

// do stuff when it's visible
tag06.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-7")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag06 is now visible");
});

// do stuff when it's hidden
tag06.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-7")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag06 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag06);

//make an new tag
var tag07 = new Tag(7);

/// do stuff when it's visible
tag07.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-8")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag07 is now visible");
});

// do stuff when it's hidden
tag07.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-8")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag07 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag07);


//make an new tag
var tag08 = new Tag(8);

// do stuff when it's visible
tag08.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-9")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag08 is now visible");
});

// do stuff when it's hidden
tag08.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-9")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag08 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag08);


//make an new tag
var tag09 = new Tag(9);

// do stuff when it's visible
tag09.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-10")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag09 is now visible");
});

// do stuff when it's hidden
tag09.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-10")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag09 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag09);


//make an new tag
var tag10 = new Tag(10);

// do stuff when it's visible
tag10.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-11")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag10 is now visible");
});

// do stuff when it's hidden
tag10.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-11")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag10 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag10);


//make an new tag
var tag11 = new Tag(11);

// do stuff when it's visible
tag11.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-12")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag11 is now visible");
});

// do stuff when it's hidden
tag11.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-12")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag11 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag11);

//make an new tag
var tag12 = new Tag(12);

// do stuff when it's visible
tag12.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-13")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag12 is now visible");
});

// do stuff when it's hidden
tag12.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-13")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag12 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag12);

//make an new tag
var tag13 = new Tag(13);

// do stuff when it's visible
tag13.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-14")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag13 is now visible");
});

// do stuff when it's hidden
tag13.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-14")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag13 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag13);

//make an new tag
var tag14 = new Tag(14);

// do stuff when it's visible
tag14.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-15")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag14 is now visible");
});

// do stuff when it's hidden
tag14.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-15")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag14 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag14);


//make an new tag
var tag15 = new Tag(15);

// do stuff when it's visible
tag15.onShow(() => {
    var scenarioCard = document.getElementById("scenario-card-16")
    scenarioCard.style.setProperty("display", "block");

    console.log("tag15 is now visible");
});

// do stuff when it's hidden
tag15.onHide(() => {
    var scenarioCard = document.getElementById("scenario-card-16")
    scenarioCard.style.setProperty("display", "none");

    console.log("tag15 is now hidden");
});

// add this tag to the system that manages all tags
tagManager.addTag(tag15);






//////////////////
//////////////////
//////////////////
//////////////////
///CHANGE CODE ABOVE
//////////////////

//// Detecting Errors - April Tag Fun - Richa ///

function processDetections(tags) {
    tagManager.updateTags(tags);
}



</script>

</body>
</html>
